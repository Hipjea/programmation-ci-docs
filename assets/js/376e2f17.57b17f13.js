"use strict";(self.webpackChunkprogrammation_ci_docs=self.webpackChunkprogrammation_ci_docs||[]).push([[3878],{2355:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var l=t(4848),r=t(8453);const a={sidebar_position:3},i="D\xe9veloppement",s={id:"methodologie/developpement",title:"D\xe9veloppement",description:"Afficher des templates",source:"@site/docs/methodologie/developpement.md",sourceDirName:"methodologie",slug:"/methodologie/developpement",permalink:"/programmation-ci-docs/docs/methodologie/developpement",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/methodologie/developpement.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Sources du projet",permalink:"/programmation-ci-docs/docs/methodologie/sources-du-projet"},next:{title:"Pistes pour la conception",permalink:"/programmation-ci-docs/docs/methodologie/pistes"}},o={},d=[{value:"Afficher des templates",id:"afficher-des-templates",level:2},{value:"Mettre en place un layout",id:"mettre-en-place-un-layout",level:2},{value:"Structure minimale",id:"structure-minimale",level:3},{value:"Cr\xe9ation du layout",id:"cr\xe9ation-du-layout",level:3},{value:"Cr\xe9ation d&#39;une page d&#39;accueil",id:"cr\xe9ation-dune-page-daccueil",level:3},{value:"Employer le template dans l&#39;application",id:"employer-le-template-dans-lapplication",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h1,{id:"d\xe9veloppement",children:"D\xe9veloppement"}),"\n",(0,l.jsx)(n.h2,{id:"afficher-des-templates",children:"Afficher des templates"}),"\n",(0,l.jsxs)(n.p,{children:["Dans le fichier d'exemple ",(0,l.jsx)(n.code,{children:"server.py"}),", c'est une sortie en HTML brut qui est r\xe9alis\xe9e :"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from flask import Flask\n\napp = Flask(__name__)\n\n\n@app.route("/")\ndef home():\n    return "<p>Hello, World!</p>"\n'})}),"\n",(0,l.jsxs)(n.p,{children:["La cha\xeene de caract\xe8res ",(0,l.jsx)(n.code,{children:'"<p>Hello, World!</p>"'})," emploie un formatage HTML."]}),"\n",(0,l.jsx)(n.p,{children:"C'est fonctionnel mais pour r\xe9aliser des mises en forme plus complexes, on se retrouve tr\xe8s vite limit\xe9."}),"\n",(0,l.jsxs)(n.p,{children:["En effet, on a besoin d'une structure HTML de base \xe9gale pour toutes les pages : on parle de ",(0,l.jsx)(n.em,{children:(0,l.jsx)(n.strong,{children:"layout"})})," dans le domaine du d\xe9veloppement web."]}),"\n",(0,l.jsxs)(n.p,{children:["Un ",(0,l.jsx)(n.em,{children:"layout"})," (en fran\xe7ais ",(0,l.jsx)(n.em,{children:"disposition"}),") est une page HTML structur\xe9e pour recevoir du contenu variable (corps de page). Le contenu de la page change en fonction d'o\xf9 on se situe sur un site web, mais la structure (le layout) ne varie pas."]}),"\n",(0,l.jsx)(n.p,{children:"Par exemple, une ent\xeate avec un menu, un pied de page, sont des \xe9l\xe9ments qu'on peut int\xe9grer dans un layout car ils restent souvent les m\xeames, quelle que soit la page du site."}),"\n",(0,l.jsxs)(n.p,{children:["La premi\xe8re \xe9tape est de modifier le fichier ",(0,l.jsx)(n.code,{children:"server.py"})," pour qu'il affiche des templates HTML (on parle de ",(0,l.jsx)(n.em,{children:"rendering"})," en anglais) : ",(0,l.jsx)(n.a,{href:"https://flask.palletsprojects.com/en/3.0.x/quickstart/#rendering-templates",children:"Rendering Templates"})]}),"\n",(0,l.jsx)(n.p,{children:"Le guide ci-dessus nous indique de faire 2 choses :"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Modifier notre valeur retour de la sorte :"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from flask import Flask, render_template\n\napp = Flask(__name__)\n\n\n@app.route("/")\ndef home():\n    return render_template("hello.html")\n'})}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsxs)(n.li,{children:["Cr\xe9er un fichier ",(0,l.jsx)(n.code,{children:"templates/hello.html"})," :"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-html",children:"<!doctype html>\n<title>Hello from Flask</title>\n<h1>Hello, World!</h1>\n"})}),"\n",(0,l.jsx)(n.p,{children:"Par la suite, on red\xe9mmare le serveur avant de rafra\xeechir la fen\xeatre du navigateur :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"flask --app server run\n"})}),"\n",(0,l.jsx)(n.h2,{id:"mettre-en-place-un-layout",children:"Mettre en place un layout"}),"\n",(0,l.jsx)(n.p,{children:"Cette \xe9tape va permettre de tirer profit d'un fichier partag\xe9 poss\xe9dant la structure du document HTML commun \xe0 chacune des pages de l'application."}),"\n",(0,l.jsx)(n.p,{children:"Un document HTML doit respecter un certain formatage pour \xeatre syntaxiquement valide, ind\xe9pendemment de l'aspect qu'il peut avoir dans le navigateur. C'est notamment important pour les robots d'indexation (moteurs de recherche) et les outils d'accessiblit\xe9 (outils de lecture pour les mal voyants par exemple)."}),"\n",(0,l.jsx)(n.h3,{id:"structure-minimale",children:"Structure minimale"}),"\n",(0,l.jsx)(n.p,{children:"Voici la structure minimale \xe0 fournir :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html>\n  <head>\n    <title>Titre du document</title>\n    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />\n  </head>\n\n  <body>\n    ...\n  </body>\n</html>\n'})}),"\n",(0,l.jsxs)(n.p,{children:["Le contenu de l'application, c'est \xe0 dire les informations qu'on apporte \xe0 l'utilisateur (textes, images, boutons, etc) sont \xe0 ins\xe9rer dans la balise ",(0,l.jsx)(n.code,{children:"<body></body>"}),"."]}),"\n",(0,l.jsx)(n.p,{children:"Le layout de l'application va donc servir \xe0 encapsuler vos diff\xe9rents contenus dans cette balise."}),"\n",(0,l.jsx)(n.h3,{id:"cr\xe9ation-du-layout",children:"Cr\xe9ation du layout"}),"\n",(0,l.jsxs)(n.p,{children:["Il faut \xe0 pr\xe9sent cr\xe9er un fichier employable par l'application Flask. On cr\xe9e un fichier nomm\xe9 ",(0,l.jsx)(n.code,{children:"layout.html"})," dans le dossier ",(0,l.jsx)(n.code,{children:"templates"}),"."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-txt",metastring:'title="Aper\xe7u de la structure du dossier du projet :"',children:"sonate_pendu/\n\u251c\u2500 templates/\n\u2502  \u251c\u2500 layout.html\n\u251c\u2500 .gitignore\n\u251c\u2500 LICENCE\n\u251c\u2500 README.md\n\u251c\u2500 requirements.txt\n\u251c\u2500 server.py\n"})}),"\n",(0,l.jsxs)(n.p,{children:["On renseigne la structure HTML attendue dans le fichier ",(0,l.jsx)(n.code,{children:"templates/layout.html"})," :"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="fr">\n  <head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>{% block title %}Sonate | Jeu du pendu{% endblock %}</title>\n    <link rel="stylesheet" href="{{ url_for(\'static\', filename=\'style.css\') }}">\n  </head>\n\n  <body>\n    {% block content %}{% endblock %}\n  </body>\n</html>\n'})}),"\n",(0,l.jsx)(n.h3,{id:"cr\xe9ation-dune-page-daccueil",children:"Cr\xe9ation d'une page d'accueil"}),"\n",(0,l.jsxs)(n.p,{children:["On cr\xe9e \xe0 pr\xe9sent un template ",(0,l.jsx)(n.code,{children:"home.html"})," pour la page d'accueil dans le dossier ",(0,l.jsx)(n.code,{children:"templates"})," :"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-txt",metastring:'title="Aper\xe7u de la structure du dossier du projet :"',children:"sonate_pendu/\n\u251c\u2500 templates/\n\u2502  \u251c\u2500 home.html\n\u2502  \u251c\u2500 layout.html\n\u251c\u2500 .gitignore\n\u251c\u2500 LICENCE\n\u251c\u2500 README.md\n\u251c\u2500 requirements.txt\n\u251c\u2500 server.py\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Dans ce nouveau fichier, on doit fournir l'information qu'on emploie le layout pr\xe9c\xe9demment cr\xe9\xe9 avec l'instruction ",(0,l.jsx)(n.code,{children:"{% extends 'layout.html' %}"}),", ainsi que la d\xe9claration de ",(0,l.jsx)(n.code,{children:"blocks"})," qui vont servir \xe0 Flask pour savoir o\xf9 ins\xe9rer les contenus."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-jinja",children:"{% extends 'layout.html' %}\n\n{% block title %}Accueil | Jeu du pendu{% endblock %}\n\n{% block content %}\n  <p>Contenu page d'accueil</p>\n{% endblock %}\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Ici, ",(0,l.jsx)(n.code,{children:"{% block title %}Accueil | Jeu du pendu{% endblock %}"})," va remplacer le contenu de la balise du layout avec cette information pour la page d'accueil."]}),"\n",(0,l.jsx)(n.p,{children:"Au lieu d'afficher :"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"<title>Sonate | Jeu du pendu</title>"})}),"\n",(0,l.jsx)(n.p,{children:"La page HTML affichera :"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"<title>Accueil | Jeu du pendu</title>"})}),"\n",(0,l.jsx)(n.h3,{id:"employer-le-template-dans-lapplication",children:"Employer le template dans l'application"}),"\n",(0,l.jsxs)(n.p,{children:["On doit \xe0 pr\xe9sent utiliser notre template ",(0,l.jsx)(n.code,{children:"home.html"})," dans l'application Flask."]}),"\n",(0,l.jsxs)(n.p,{children:["On ouvre ",(0,l.jsx)(n.code,{children:"server.py"})," et on modifie la fonction ",(0,l.jsx)(n.code,{children:"home()"})," :"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from flask import Flask, render_template\n\napp = Flask(__name__)\n\n\n@app.route("/")\ndef home():\n    return render_template("home.html")\n'})}),"\n",(0,l.jsxs)(n.admonition,{type:"warning",children:[(0,l.jsxs)(n.p,{children:["Notez qu'on doit importer la fonction ",(0,l.jsx)(n.code,{children:"render_template"})," de la biblioth\xe8que ",(0,l.jsx)(n.code,{children:"flask"})," lors de notre import, ce qui n'\xe9tait pas le cas initialement :"]}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:"from flask import Flask, render_template\n"})}),(0,l.jsxs)(n.p,{children:["C'est la fonction qui est employ\xe9e pour interpr\xe9ter le template ",(0,l.jsx)(n.code,{children:"home.html"}),"."]})]}),"\n",(0,l.jsx)(n.p,{children:"On red\xe9mmare le serveur pour prendre en compte les changements avant de rafra\xeechir la fen\xeatre du navigateur :"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"flask --app server run\n"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}}}]);